{% extends "base.html" %}

{% block title %}Add Material - Construction Material Tracker{% endblock %}

{% block content %}
<div class="card">
    <h1><i class="fas fa-plus"></i> Add New Material</h1>
    
    <form method="POST">
        <div class="form-group">
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" required value="{{ date }}">
        </div>
        
        <div class="form-group">
            <label for="site_name">Construction Site Name:</label>
            <input type="text" id="site_name" name="site_name" required placeholder="e.g., Downtown Office Building">
        </div>
        
        <div class="form-group">
            <label for="material_type">Material Type:</label>
            <select id="material_type" name="material_type" required>
                <option value="">Select Material Type</option>
                <option value="Concrete">Concrete</option>
                <option value="Steel">Steel</option>
                <option value="Lumber">Lumber</option>
                <option value="Electrical">Electrical</option>
                <option value="Plumbing">Plumbing</option>
                <option value="Insulation">Insulation</option>
                <option value="Hardware">Hardware</option>
                <option value="Tools">Tools</option>
                <option value="Other">Other</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="material_name">Material Name:</label>
            <input type="text" id="material_name" name="material_name" required placeholder="e.g., Portland Cement">
        </div>
        
        <div class="form-group">
            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" name="quantity" step="0.01" required placeholder="0.00">
        </div>
        
        <div class="form-group">
            <label for="unit">Unit:</label>
            <select id="unit" name="unit" required>
                <option value="">Select Unit</option>
                <option value="bags">Bags</option>
                <option value="tons">Tons</option>
                <option value="cubic_yards">Cubic Yards</option>
                <option value="pieces">Pieces</option>
                <option value="feet">Feet</option>
                <option value="meters">Meters</option>
                <option value="gallons">Gallons</option>
                <option value="liters">Liters</option>
                <option value="kg">Kilograms</option>
                <option value="lbs">Pounds</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="unit_cost">Unit Cost (₹):</label>
            <input type="number" id="unit_cost" name="unit_cost" step="0.01" required placeholder="0.00">
        </div>
        
        <div class="form-group">
            <label for="supplier">Supplier:</label>
            <input type="text" id="supplier" name="supplier" placeholder="Supplier Name">
        </div>
        
        <div class="form-group">
            <label for="notes">Notes:</label>
            <textarea id="notes" name="notes" rows="3" placeholder="Additional notes..."></textarea>
        </div>
        
        <button type="submit" class="btn"><i class="fas fa-save"></i> Save Material</button>
        <a href="/" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
    </form>
</div>

<script>
    // Calculate total cost automatically
    document.getElementById('quantity').addEventListener('input', calculateTotal);
    document.getElementById('unit_cost').addEventListener('input', calculateTotal);
    
    function calculateTotal() {
        const quantity = parseFloat(document.getElementById('quantity').value) || 0;
        const unitCost = parseFloat(document.getElementById('unit_cost').value) || 0;
        const total = quantity * unitCost;
        
        // You could add a total cost display field here if desired
        console.log('Total Cost: ₹' + total.toFixed(2));
    }
</script>
{% endblock %}